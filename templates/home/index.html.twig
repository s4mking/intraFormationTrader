{% extends 'base.html.twig' %}

{% block title %}Intra
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('index') }}
{% endblock %}

{% block body %}
    <div class="container">
        <main>
            <div class="py-5 text-center mt-5">
                <h2>Dasshboard</h2>
                <p class="lead">Résumé de vos opérations</p>
            </div>

            <div class="row g-3">
                <div class="col-md-5 col-lg-4 order-md-last">
                        <div class="h-50">
                            <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                            <script type="text/javascript">
                                new TradingView.widget(
                                    {
                                        "autosize": true,
                                        "symbol": "NASDAQ:AAPL",
                                        "interval": "D",
                                        "timezone": "Etc/UTC",
                                        "theme": "light",
                                        "style": "1",
                                        "locale": "fr",
                                        "toolbar_bg": "#f1f3f6",
                                        "enable_publishing": false,
                                        "withdateranges": true,
                                        "allow_symbol_change": true,
                                        "container_id": "tradingview_0ceec"
                                    }
                                );
                            </script>
                        </div>

                </div>
                <div class="col-md-9 col-lg-8">
                    <div>
                        <p>{{ user.email }}</p>
                    </div>
                    <table class="table table-hover">
                        <thead>
                        <tr class="table-active">
                            <th >Id</th>
                            <th>Symbol</th>
                            <th>Position</th>
                            <th>Type</th>
                            <th>Lots</th>
                            <th>OpenTime</th>
                            <th>OpenPrice</th>
                            <th>CloseTime</th>
                            <th>ClosePrice</th>
                            <th>Profit</th>
                            <th>NetProfit</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for operation in operations %}
                            {% if operation.type == 'Sell' %}
                                <tr class="table-info">
                            {% elseif operation.type == 'Buy' %}
                                <tr class="table-warning">
                            {% elseif operation.type == 'Credit' %}
                                <tr class="table-success">
                            {% endif %}
                                <td>{{ operation.id }}</td>

{#                            {% if operation.symbol == 'USDJPY' %}#}
{#                                <td><i class="fa-solid fa-dollar-sign"></i></td>#}
{#                            {% elseif operation.symbol == 'EURUSD' %}#}
{#                                <td><i class="fa-solid fa-euro-sign"></i></td>#}
{#                            {% elseif operation.symbol == 'RIPPLE' %}#}
{#                                <td><i class="fa-solid fa-ruble-sign"></i></td>#}
{#                            {% elseif operation.symbol == 'GBPJPY' %}#}
{#                                <td><i class="fa-solid fa-yen-sign"></i></td>#}
{#                            {% else%}#}
                            <td>{{ operation.symbol }}</td>
{#                            {% endif %}#}
                                <td>{{ operation.position }}</td>
                                <td>{{ operation.type }}</td>
                                <td>{{ operation.lots }}</td>
                                <td>{{ operation.openTime ? operation.openTime|date('Y-m-d H:i:s') : '' }}</td>
                                <td>{{ operation.openPrice }}</td>
                                <td>{{ operation.closeTime ? operation.closeTime|date('Y-m-d H:i:s') : '' }}</td>
                                <td>{{ operation.closePrice }}</td>
                                <td>{{ operation.profit }}</td>
                                <td>{{ operation.netProfit }}</td>
                            </tr>
                        {% else %}
                            <tr>
                                <td colspan="12">no records found</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </main>

        <footer class="my-5 pt-5 text-muted text-center text-small">
            <p class="mb-1">© 2017–2020 Company Name</p>
            <ul class="list-inline">
                <li class="list-inline-item">
                    <a href="#">Privacy</a>
                </li>
                <li class="list-inline-item">
                    <a href="#">Terms</a>
                </li>
                <li class="list-inline-item">
                    <a href="#">Support</a>
                </li>
            </ul>
        </footer>
    </div>

{% endblock %}
